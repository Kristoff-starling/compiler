state {
	prob: float
}
fn init(prob) {
	prob := 0.98;
}

fn req(rpc_req) {
	match(randomf(0,1) < prob) {
		true => {
			send(rpc_req, Down);
		}
		false => {
			send(err('fault_injected'), Up);
		}
	};
}

fn resp(rpc_resp) {
    send(rpc_resp, Up);
}
